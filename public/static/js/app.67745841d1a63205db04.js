webpackJsonp([1],{"+ohG":function(t,e,a){"use strict";e.a={props:["tableData","url"],data:function(){return{}},mounted:function(){},methods:{}}},"/Hqz":function(t,e,a){"use strict";var o=a("mvHQ"),r=a.n(o),n=a("S9gf");e.a={name:"signIn",data:function(){return{msg:"BIG SHIP管理后台",username:"",password:""}},methods:{login:function(t){var e=this;return n.a.getUser(this.username,this.password).then(function(t){!1!==t?(localStorage.setItem("user",r()({username:e.username,password:e.password})),e.$router.push("/")):e.$message({type:"error",message:"用户名或密码错误"})})}}}},"/gkx":function(t,e,a){"use strict";var o=a("//Fk"),r=a.n(o),n=a("woOf"),i=a.n(n),l=a("S9gf");e.a={data:function(){return{equipmentData:[],allLabels:[],dialogEditEquipment:!1,dialogAddEquipment:!1,form:{node_ids:[]},addForm:{node_ids:[]},formLabelWidth:"120px",rules:{equipment_name:[{required:!0,message:"请输入名称",trigger:"blur"}],width:[{required:!0,type:"number",message:"请输入长度",trigger:"blur,change"}],height:[{required:!0,type:"number",message:"请输入宽度",trigger:"blur,change"}],image:[{required:!0,message:"请输入图片路径",trigger:"blur"}],style:[{required:!0,message:"请选择类型",trigger:"blur,change"}]}}},mounted:function(){this.getEquipmentInfo(),this.getLabels()},methods:{openEdit:function(t){this.form=i()({},t),this.dialogEditEquipment=!0},getEquipmentInfo:function(){var t=this;return l.a.getEquipments().then(function(e){return t.equipmentData=e,r.a.resolve()})},addEquipment:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({type:"error",message:"表格验证失败"}),!1;l.a.addEquipment(e.addForm).then(function(){e.dialogAddEquipment=!1,e.getEquipmentInfo()},function(){e.$message({type:"error",message:"添加失败"})})})},updateEquipment:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({type:"error",message:"表格验证失败"}),!1;l.a.updateEquipment(e.form.id,e.form).then(function(){e.$message({type:"success",message:"更新成功"}),e.dialogEditEquipment=!1,e.getEquipmentInfo()},function(t){e.$message({type:"error",message:"更新失败"})}).then(function(){})})},deleteEquipment:function(t,e){var a=this;return r.a.resolve().then(function(){return a.$confirm("确定要删除此设备？","警告",{confirmButtonText:"确定",cancelButtonText:"取消"})}).then(function(){return l.a.deleteEquipment(e[t].id).then(function(){return a.getEquipmentInfo()}).then(function(){a.$message({type:"success",message:"删除成功"})},function(){a.$message({type:"error",message:"删除失败"})})})},cancelAdd:function(t){this.dialogAddEquipment=!1,this.$refs[t].resetFields()},cancelInfo:function(t){this.dialogEditEquipment=!1,this.$refs[t].resetFields()},getLabels:function(){var t=this;l.a.getLabels().then(function(e){e.forEach(function(e){t.allLabels.push(String(e.nodeID))})})}}}},0:function(t,e){},"01Oi":function(t,e,a){"use strict";function o(t){a("5i36")}var r=a("qAKN"),n=a("VU/8"),i=o,l=n(null,r.a,!1,i,null,null);e.a=l.exports},"3e4R":function(t,e,a){"use strict";var o=a("fZjL"),r=a.n(o);e.a={props:{blockId:String,coordinate:Object,blockShow:Boolean,windowWidth:Number,region:Array,equipment:Array,regionName:String,reset:String,clear:Boolean},data:function(){return{size:10,getProportion:10,startNodeID:"514",endNodeID:"515",stationCoor:{},labelCoor:{},svgViewport:{},gX:{},gY:{},gridlinesX:{},gridlinesY:{},bkg:{},plane:{},planeInfo:[],stationIcon:{},circles:{},text:{},coorText:{},rect:{},innerSpace:{},labelsNodeID:[],stationsNodeID:[],allFrame:[],newx:null,newy:null,scale:null,startCoor:!1,getTime:0,dataArr:{},dataArrLen:4,maxEnlarge:null,maxNarrow:null}},mounted:function(){this.getRange()},watch:{windowWidth:function(){this.onresize()},coordinate:function(){this.startMove()},reset:function(){this.resetSize()},blockShow:function(){this.remove()},clear:function(){this.removeCircle()},equipment:function(){this.getEquipment()}},methods:{xAxisScale:function(){return d3.scaleLinear().domain([this.startx,this.startx+this.rangeWidth]).range([0,this.svgWidth])},yAxisScale:function(){return d3.scaleLinear().domain([this.starty,this.starty+this.rangeHeight]).range([this.svgHeight,0])},xAxis:function(){return d3.axisTop(this.xAxisScale())},yAxis:function(){return d3.axisRight(this.yAxisScale())},getbkg:function(t,e,a,o,r,n){return this.nodeLayer.append("svg:image").attr("xlink:href",n).attr("x",this.xAxisScale()(e)).attr("y",this.yAxisScale()(a)).attr("width",this.xAxisScale()(o)-this.xAxisScale()(0)).attr("height",this.yAxisScale()(0)-this.yAxisScale()(r))},getInnerSpace:function(){return this.svgViewport.append("g").attr("class","inner_space")},zoom:function(){return d3.zoom().on("zoom",this.zoomFunction).scaleExtent([this.maxNarrow,this.maxEnlarge])},getNodeLayer:function(){return this.innerSpace.append("g")},createStationIcon:function(t,e,a,o,r){var n=this.initCoordinate()[0],i=this.initCoordinate()[1],l=this.newx?this.newx:this.xAxisScale(),s=this.newy?this.newy:this.yAxisScale(),d=this.nodeLayer.append("svg:image").attr("class",t).attr("xlink:href",r).attr("x",this.xAxisScale()(e)-o/2).attr("y",this.yAxisScale()(a)-o/2).attr("width",o/i).attr("height",o/i).attr("transform",n);return"static/image/label.svg"==r&&d.attr("x",l(e)-o/2).attr("y",s(a)-o/2).attr("width",o).attr("height",o),d.info={x:e,y:a,offest_x:o/2,offest_y:o/2},d},createText:function(t,e,a,o,r){var n=this.initCoordinate()[0],i=this.initCoordinate()[1],l=this.nodeLayer.append("text").attr("id",t).attr("x",this.xAxisScale()(e)-this.size/i).attr("y",this.yAxisScale()(a)+2*this.size/i).text(o).attr("font-size",this.size/i).attr("fill",r||"black").attr("transform",n);return l.info={x:e,y:a,offest_x:this.size,offest_y:2*this.size},l},createCoorText:function(t,e,a,o,r){var n=this.initCoordinate()[0],i=this.initCoordinate()[1],o=this.nodeLayer.append("text").attr("id",t).attr("x",this.xAxisScale()(e)-this.size/i).attr("y",this.yAxisScale()(a)+3*this.size/i).text(o).attr("font-size",this.size/i).attr("fill",r||"black").attr("transform",n);return o.info={x:e,y:a,offest_x:this.size,offest_y:3*this.size},o},createCircle:function(t,e,a){var o=this.initCoordinate()[0],r=this.initCoordinate()[1];return this.nodeLayer.append("circle").attr("r",3/r).attr("cx",t).attr("cy",e).attr("fill",a).attr("transform",o)},initCoordinate:function(){var t,e=this.bkg[this.region[0].region_name].attr("transform");if(null!=e){var a=e.split(/[(]|[)]/);t=parseFloat(a[a.length-2])}else t=1;return[e,t]},getX:function(){var t=this.svgHeight-1;return this.innerSpace.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+t+")").call(this.xAxis())},getY:function(){return this.innerSpace.append("g").attr("class","axis axis--y").call(this.yAxis())},getPlane:function(){return this.innerSpace.append("g")},make_x_gridlines:function(){return d3.axisBottom(this.xAxisScale())},make_y_gridlines:function(){return d3.axisLeft(this.yAxisScale())},get_x_gridlines:function(){return this.svgViewport.append("g").attr("class","grid").style("stroke","#FF0000").style("stroke-width","0.3px").style("stroke-dasharray","5,5").style("stroke-opacity","0.2").style("stroke","dashed").attr("transform","translate(0,"+this.svgHeight+")").call(this.make_x_gridlines().tickSize(-this.svgHeight).tickFormat(""))},get_y_gridlines:function(){return this.svgViewport.append("g").attr("class","grid").style("stroke-width","0.3px").style("stroke-dasharray","5,5").style("stroke-opacity","0.2").attr("fill","red !important").call(this.make_y_gridlines().tickSize(-this.svgWidth).tickFormat(""))},createPlane:function(t,e,a,o,r,n,i){this.plane[n]=this.getPlane();var l=this.newx?this.newx:this.xAxisScale(),s=this.newy?this.newy:this.yAxisScale(),d=this.scale?this.scale.k:1;this.plane[n].append("svg:image").attr("xlink:href",i).attr("id",n).attr("x",this.xAxisScale()(0)-this.xAxisScale()(o)).attr("y",this.xAxisScale()(0)-this.xAxisScale()(r)).attr("width",this.xAxisScale()(2*o)-this.xAxisScale()(0)).attr("height",this.xAxisScale()(2*r)-this.xAxisScale()(0)),this.plane[n].datum(function(o){return{coor:[t,e],angle:a}}),this.plane[n].attr("transform",function(t,e){return"translate("+l(t.coor[0])+","+s(t.coor[1])+") rotate("+t.angle+") scale("+d+")"})},createCanvas:function(){this.svgViewport=d3.select("#"+this.blockId).append("svg").attr("width",this.svgWidth).attr("height",this.svgHeight).style("background","white").call(this.zoom()),this.innerSpace=this.getInnerSpace(),this.nodeLayer=this.getNodeLayer();for(var t=0;t<this.region.length;t++)this.bkg[this.region[t].region_name]=this.getbkg(this.region[t].region_name,this.region[t].start_point[0],this.region[t].start_point[1]+this.region[t].height,this.region[t].width,this.region[t].height,this.region[t].background_image);this.gY=this.getY(),this.gX=this.getX(),this.gridlinesX=this.get_x_gridlines(),this.gridlinesY=this.get_y_gridlines()},zoomFunction:function(){var t=this;this.newx=d3.event.transform.rescaleX(this.xAxisScale()),this.newy=d3.event.transform.rescaleY(this.yAxisScale()),this.gX.call(this.xAxis().scale(this.newx)),this.gY.call(this.yAxis().scale(this.newy)),this.gridlinesX.call(d3.axisBottom(this.xAxisScale()).scale(this.newx).tickSize(-this.svgHeight).tickFormat("")),this.gridlinesY.call(d3.axisLeft(this.yAxisScale()).scale(this.newy).tickSize(-this.svgWidth).tickFormat("")),t.getProportion=t.size/d3.event.transform.k,t.scale=d3.event.transform;for(var e=0;e<this.region.length;e++)this.bkg[this.region[e].region_name].attr("transform",t.scale);for(var e=0;e<this.labelsNodeID.length;e++){var a=this.labelsNodeID[e],o=t.newx?t.newx:t.xAxisScale(),r=t.newy?t.newy:t.yAxisScale();this.stationIcon[a].attr("transform",t.scale).attr("width",2*this.size).attr("height",2*this.size).attr("x",o(t.stationIcon[a].info.x)-t.stationIcon[a].info.offest_x).attr("y",r(t.stationIcon[a].info.y)-t.stationIcon[a].info.offest_y),this.innerSpace.selectAll("circle").attr("transform",t.scale).attr("r",3/t.scale.k),this.zoomText(a,t.scale)}for(var e=0;e<this.stationsNodeID.length;e++){var a=this.stationsNodeID[e];this.stationIcon[this.stationsNodeID[e]].attr("transform",t.scale).attr("width",4*this.size/t.scale.k).attr("height",4*this.size/t.scale.k).attr("x",t.xAxisScale()(t.stationIcon[a].info.x)-t.stationIcon[a].info.offest_x/t.scale.k).attr("y",t.yAxisScale()(t.stationIcon[a].info.y)-t.stationIcon[a].info.offest_y/t.scale.k),this.zoomText(a,t.scale)}t.planeInfo.forEach(function(e){void 0!==t.plane[e.id]&&t.plane[e.id].attr("transform",function(e,a){return"translate("+t.newx(e.coor[0])+","+t.newy(e.coor[1])+") rotate("+e.angle+") scale("+d3.event.transform.k+")"})})},zoomText:function(t,e){var a=this;this.text[t].attr("transform",e).attr("font-size",this.size/e.k).attr("x",a.xAxisScale()(a.text[t].info.x)-a.text[t].info.offest_x/e.k).attr("y",a.yAxisScale()(a.text[t].info.y)+a.text[t].info.offest_y/e.k),this.coorText[t].attr("transform",e).attr("font-size",this.size/e.k).attr("x",a.xAxisScale()(a.coorText[t].info.x)-a.coorText[t].info.offest_x/e.k).attr("y",a.yAxisScale()(a.coorText[t].info.y)+a.coorText[t].info.offest_y/e.k)},startMove:function(){var t=this;if(!1!==t.startCoor){var e=t.coordinate.labelInfo||{},a=t.coordinate.stationInfo||{};t.getDeleteNode(t.labelsNodeID,e),t.getDeleteNode(t.stationsNodeID,a),r()(e).forEach(function(a){var o=e[a][0],n=e[a][1],i=e[a][2],l=e[a][3],s=e[a][4],d="("+e[a][0]+","+e[a][1]+")";if(-1!==t.labelsNodeID.indexOf(a)){t.moveStationIcon(a,o,n,t.size/2),t.moveText(a,o,n,i),t.moveCoorText(a,o,n,d),t.getDataArr(a,t.xAxisScale()(o),t.yAxisScale()(n),l,s);var u=t.getLabelTime(a,l);t.planeInfo.forEach(function(a){if(void 0!==t.plane[a.id]){var o=a.node_ids[0]>a.node_ids[1]?a.node_ids[1]:a.node_ids[0],n=a.node_ids[0]>a.node_ids[1]?a.node_ids[0]:a.node_ids[1];if(u.nodeID!=o&&u.nodeID!=n||0!=u.status){var i=t.setPosition(e,o,n);if(0==r()(i).length)return;t.plane[a.id].datum(function(t){return t.coor[0]=i.X,t.coor[1]=i.Y,t.angle=i.angle,t}),t.plane[a.id].attr("transform",function(e,a){var o=t.newx?t.newx:t.xAxisScale(),r=t.newy?t.newy:t.yAxisScale(),n=t.scale?t.scale.k:1;return"translate("+o(e.coor[0])+","+r(e.coor[1])+") rotate("+e.angle+") scale("+n+")"})}else t.plane[a.id].remove()}})}else t.stationIcon[a]=t.createStationIcon(a,o,n,2*t.size,"static/image/label.svg"),t.text[a]=t.createText(a,o,n,i,s),t.coorText[a]=t.createCoorText(a,o,n,d,s),t.dataArr[a]=[],t.labelsNodeID.push(a),jQuery("image."+a).each(function(){var e=$(this),o=e.attr("class"),r=e.attr("href");jQuery.get(r,function(r){var n=jQuery(r).find("svg");n.attr("x",e.attr("x")),n.attr("y",e.attr("y")),n.attr("width",e.attr("width")),n.attr("height",e.attr("height")),n.attr("fill",s),void 0!==o&&(n=n.attr("class",o+" replaced-svg")),n=n.removeAttr("xmlns:a"),e.replaceWith(n),n.info=t.stationIcon[a].info,t.stationIcon[a]=n},"xml")}),t.planeInfo.forEach(function(a){var o=a.node_ids[0]>a.node_ids[1]?a.node_ids[1]:a.node_ids[0],n=a.node_ids[0]>a.node_ids[1]?a.node_ids[0]:a.node_ids[1],i=t.setPosition(e,o,n);0!=r()(i).length&&void 0===t.plane[a.id]&&t.createPlane(i.X,i.Y,i.angle,a.width,a.height,a.id,a.image)})}),r()(a).forEach(function(e){var o=a[e][0],r=a[e][1],n=a[e][2],i="("+a[e][0]+","+a[e][1]+")";-1!==t.stationsNodeID.indexOf(e)?(t.moveText(e,o,r,n),t.moveCoorText(e,o,r,i),t.moveStationIcon(e,o,r,t.getProportion)):(t.stationIcon[e]=t.createStationIcon(e,o,r,4*t.size,"static/image/station.svg"),t.text[e]=t.createText(e,o,r,n),t.coorText[e]=t.createCoorText(e,o,r,i),t.stationsNodeID.push(e))})}},moveText:function(t,e,a,o){var r=this;r.text[t].attr("x",r.xAxisScale()(e)-r.getProportion).attr("y",r.yAxisScale()(a)+2*r.getProportion).text(o),r.text[t].info.x=e,r.text[t].info.y=a},moveCoorText:function(t,e,a,o){var r=this;r.coorText[t].attr("x",r.xAxisScale()(e)-r.getProportion).attr("y",r.yAxisScale()(a)+3*r.getProportion).text(o),r.coorText[t].info.x=e,r.coorText[t].info.y=a},moveStationIcon:function(t,e,a,o){var r=this,n=r.newx?r.newx:r.xAxisScale(),i=r.newy?r.newy:r.yAxisScale();-1!==r.labelsNodeID.indexOf(t)?r.stationIcon[t].attr("x",n(e)-2*o).attr("y",i(a)-2*o):r.stationIcon[t].attr("x",r.xAxisScale()(e)-2*o).attr("y",r.yAxisScale()(a)-2*o),r.stationIcon[t].info.x=e,r.stationIcon[t].info.y=a},setPosition:function(t,e,a){var o=this,r={};if(void 0===t[e]||void 0===t[a])return r;if(-1!==o.labelsNodeID.indexOf(e)&&-1!==o.labelsNodeID.indexOf(a)){r.X=(t[e][0]+t[a][0])/2,r.Y=(t[e][1]+t[a][1])/2;var n=Math.abs(t[a][0]-t[e][0]),i=Math.abs(t[a][1]-t[e][1]),l=Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),s=n/l,d=Math.asin(s),u=Math.floor(180/(Math.PI/d));t[e][0]>t[a][0]&&t[e][1]<t[a][1]&&(u=180-u),t[e][0]<t[a][0]&&t[e][1]>t[a][1]&&(u=-u),t[e][0]<t[a][0]&&t[e][1]<t[a][1]&&(u=180+u),t[e][0]==t[a][0]&&t[e][1]>t[a][1]&&(u=0),t[e][0]>t[a][0]&&t[e][1]==t[a][1]&&(u=90),t[e][0]<t[a][0]&&t[e][1]==t[a][1]&&(u=270),t[e][0]==t[a][0]&&t[e][1]<t[a][1]&&(u=180),r.angle=u}return r},getDataArr:function(t,e,a,o,r){var n=this;if(n.dataArr[t].length<1){var i={x:e,y:a,time:o};n.dataArr[t].push(i),n.circles[t]=[],n.circles[t].push(n.createCircle(e,a,r))}if(n.dataArr[t].length>=1&&n.dataArr[t][n.dataArr[t].length-1].time!=o)if(n.dataArr[t].length<n.dataArrLen){var l={x:e,y:a,time:o};n.dataArr[t].push(l),n.circles[t].push(n.createCircle(e,a,r))}else{n.dataArr[t].shift();var s={x:e,y:a,time:o};n.dataArr[t].push(s);for(var d=0;d<n.dataArr[t].length;d++)n.circles[t][d].attr("cx",n.dataArr[t][d].x).attr("cy",n.dataArr[t][d].y)}},getLabelTime:function(t,e){return(new Date).getTime()-e>2e4?{nodeID:t,status:!1}:{nodeID:t,status:!0}},getEquipment:function(){var t=this;t.equipment.forEach(function(e){"飞机"==e.equipment_name&&t.planeInfo.push(e)})},getRange:function(){for(var t=this,e=0;e<t.region.length;e++)if(t.region[e].region_name===t.regionName){var a=t.region[e];t.startx=a.start_point[0],t.starty=a.start_point[1],t.svgWidth=document.getElementsByClassName("father")[0].offsetWidth,t.svgHeight=t.svgWidth*(a.height/a.width),t.rangeWidth=a.width,t.rangeHeight=a.height,t.maxEnlarge=a.maxEnlarge||5,t.maxNarrow=a.maxNarrow||0,t.onresize(),t.createCanvas(),t.startCoor=!0}},onresize:function(){for(var t,e,a=this.svgWidth,o=this.svgHeight,r=-1,n=document.getElementsByClassName("testblock"),i=document.getElementsByClassName("heightblock"),l=document.getElementsByClassName("father"),s=0;s<n.length;s++)if(n[s].getElementsByTagName("div")[0].getAttribute("id")==this.blockId){r=s;break}if(-1!=r){for(var s=0;s<l.length;s++)0!=l[s].offsetWidth&&(t=l[s].offsetWidth);var d=Number(t/a);n[r].style.height=t*(o/a)+"px",n[r].style.transform="scale("+d+","+d+")",n[r].style.transformOrigin="0 0",e=n[r].style.height,i[r].style.height=e}},resetSize:function(){if(""!=this.reset&&this.blockId===this.reset.split("-")[0]){var t=d3.zoomIdentity.translate(0,0).scale(1);this.svgViewport.call(this.zoom().transform,t)}},remove:function(){var t=this,e=d3.zoomIdentity.translate(0,0).scale(1);t.svgViewport.call(t.zoom().transform,e),t.innerSpace.selectAll("circle").remove();for(var a=0;a<t.labelsNodeID.length;a++){var o=t.labelsNodeID[a];t.stationIcon[o].remove(),t.text[o].remove(),t.coorText[o].remove()}for(var a=0;a<t.stationsNodeID.length;a++){var o=t.stationsNodeID[a];t.stationIcon[o].remove(),t.text[o].remove(),t.coorText[o].remove()}t.labelsNodeID=[],t.stationsNodeID=[],t.dataArr={},t.planeInfo.forEach(function(e){void 0!==t.plane[e.id]&&t.plane[e.id].remove()}),t.plane={}},removeCircle:function(){this.innerSpace.selectAll("circle").remove();for(var t=0;t<this.labelsNodeID.length;t++){var e=this.labelsNodeID[t];this.dataArr[e]=[]}},getDeleteNode:function(t,e){for(var a=this,o=0;o<t.length;o++){var r=t[o];void 0===e[r]&&(a.stationIcon[r].remove(),a.text[r].remove(),a.coorText[r].remove())}}}}},"5i36":function(t,e){},"64oi":function(t,e,a){"use strict";var o=a("Uya5"),r=a.n(o),n={json:!1,props:["method","action","beforeSerialize","onSubmit","json","disabled"],methods:{submit:function(t){var e=this;if(t&&t.preventDefault(),"function"!=typeof n.onSubmit&&"function"!=typeof this.onSubmit)return console.warn("please set me an 'onSubmit' handler!");if(!this.disabled){var a=function(){setTimeout(function(){var t={url:e.action,method:(e.method||"post").toLowerCase(),body:r()(e.$el,{hash:void 0!==e.json?e.json:n.json}),vm:e};e.runHook("onSubmit",t)},0)};this.runHook("beforeSerialize",this,a)}},runHook:function(t){for(var e=arguments.length,a=Array(e>1?e-1:0),o=1;o<e;o++)a[o-1]=arguments[o];"function"==typeof this[t]?this[t].apply(null,a):"function"==typeof n[t]&&n[t].apply(null,a)}}};e.a=n},"65du":function(t,e){},"71je":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"type",label:"类型",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"value",label:"值",width:"900"}})],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},"7SRB":function(t,e,a){"use strict";var o=a("//Fk"),r=a.n(o),n=a("mvHQ"),i=a.n(n),l=a("woOf"),s=a.n(l),d=a("S9gf"),u=a("ymcs");e.a={data:function(){return{tableData:[],dialogAddLabel:!1,dialogEditLabel:!1,form:{nodeType:3},addForm:{nodeType:3},formLabelWidth:"120px",rules:{nodeID:[{required:!0,validator:function(t,e,a){if(e%1==0==0)return a(new Error("请输入整数的节点ID"));a()},trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},created:function(){var t=this;t.getLabelInfo(),u.a.$on("rtkres_roverpos",function(e){t.tableData=t.updateLabelStatus(e)}),u.a.$on("user_uwb",function(e){t.tableData=t.updateLabelStatus(e)}),u.a.$on("user_stat",function(e){t.tableData=t.updateLabelStatus(e)}),u.a.$on("status",function(e){t.tableData=t.setTableStatus(e)})},methods:{openEdit:function(t){this.form=s()({},t),this.dialogEditLabel=!0},getLabelInfo:function(){var t=this;d.a.getLabels().then(function(e){t.tableData=e})},updateLabelStatus:function(t){for(var e=this,a=0;a<e.tableData.length;a++)Number(t.nodeID)===Number(e.tableData[a].nodeID)&&(void 0!==t.battery&&(e.tableData[a].status=t.battery),void 0!==t.x&&(""!==t.z?0!=t.stat&&(e.tableData[a].coordinate=t.x+","+t.y+","+t.z):e.tableData[a].coordinate=t.x+","+t.y),void 0!==t.anchors&&(e.tableData[a].anchors=t.anchors.join()),void 0!==t.satNum&&0!=t.stat&&(e.tableData[a].satNum=t.satNum));return JSON.parse(i()(e.tableData))},setTableStatus:function(t){for(var e=this,a=0;a<e.tableData.length;a++){for(var o=0;o<t.rtk.bases.length;o++)e.tableData[a].nodeID==t.rtk.bases[o].nodeID&&(e.tableData[a].status=t.rtk.bases[o].stat);for(var r=0;r<t.uwb.bases.length;r++)e.tableData[a].nodeID==t.uwb.bases[r].nodeID&&(e.tableData[a].status=t.uwb.bases[r].stat)}return e.tableData},updateLabel:function(t){var e=this;this.$refs[t].validate(function(t){t?d.a.updateStation(e.form.id,e.form).then(function(){e.$message({type:"success",message:"更新成功"}),e.dialogEditLabel=!1,e.getLabelInfo()},function(){e.$message({type:"error",message:"更新失败"})}):e.$message({type:"error",message:"表格验证失败"})})},addLabel:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({type:"error",message:"表格验证失败"}),!1;d.a.addStation(e.addForm).then(function(){e.dialogAddLabel=!1,e.getLabelInfo()},function(t){-1!==t.body.indexOf("Insert failed, duplicate id")&&e.$message({type:"error",message:"添加失败,nodeID相同"})})})},cancelInfo:function(t){this.dialogEditLabel=!1,this.$refs[t].resetFields()},cancelAdd:function(t){this.dialogAddLabel=!1,this.$refs[t].resetFields()},deleteLabel:function(t,e){var a=this;return r.a.resolve().then(function(){return a.$confirm("确定要删除此标签？","警告",{confirmButtonText:"确定",cancelButtonText:"取消"})}).then(function(){return d.a.deleteStation(e[t].id).then(function(){return a.getLabelInfo()}).then(function(){a.$message({type:"success",message:"删除成功"})},function(){a.$message({type:"error",message:"删除失败"})})})}}}},"9Yo3":function(t,e,a){"use strict";function o(t){a("Ovih")}var r=a("3e4R"),n=a("9hUA"),i=a("VU/8"),l=o,s=i(r.a,n.a,!1,l,null,null);e.a=s.exports},"9hUA":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"block testblock1",attrs:{id:t.blockId,coordinate:t.coordinate,blockShow:t.blockShow,windowWidth:t.windowWidth,regiontest:t.region,regionName:t.regionName,clear:t.clear,equipment:t.equipment,reset:t.reset}})},r=[],n={render:o,staticRenderFns:r};e.a=n},CGpb:function(t,e,a){"use strict";var o=a("//Fk"),r=a.n(o),n=a("mvHQ"),i=a.n(n),l=a("woOf"),s=a.n(l),d=a("S9gf"),u=a("ymcs");e.a={data:function(){return{tableData:[],dialogAddStation:!1,dialogEditStation:!1,form:{},addForm:{},rules:{nodeID:[{validator:function(t,e,a){if(e%1==0==0)return a(new Error("请输入整数的节点ID"));a()},trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],nodeType:[{required:!0,type:"number",message:"基站类型",trigger:"change"}],delaySend:[{type:"number",message:"请输入",trigger:"blur"}],is_moving:[{type:"boolean",message:"请输入",trigger:"blur"}],x:[{type:"number",message:"请输入",trigger:"blur"}],y:[{type:"number",message:"请输入",trigger:"blur"}],z:[{type:"number",message:"请输入",trigger:"blur"}],channel:[{type:"number",message:"请输入",trigger:"blur"}],headLength:[{type:"number",message:"请输入",trigger:"blur"}],headCode:[{type:"number",message:"请输入",trigger:"blur"}],PRF:[{type:"number",message:"请输入",trigger:"blur"}]},formLabelWidth:"120px"}},created:function(){var t=this;t.getStationInfo(),u.a.$on("status",function(e){t.tableData=t.setTableStatus(e)})},methods:{openEdit:function(t){this.form=s()({},t),this.dialogEditStation=!0},getStationInfo:function(){var t=this;d.a.getStations().then(function(e){t.tableData=t.showCoordinate(e)})},setTableStatus:function(t){for(var e=this,a=0;a<e.tableData.length;a++){for(var o=0;o<t.rtk.bases.length;o++)e.tableData[a].nodeID==t.rtk.bases[o].nodeID&&(e.tableData[a].status=t.rtk.bases[o].stat);for(var r=0;r<t.uwb.bases.length;r++)e.tableData[a].nodeID==t.uwb.bases[r].nodeID&&(e.tableData[a].status=t.uwb.bases[r].stat)}return JSON.parse(i()(e.tableData))},showCoordinate:function(t){for(var e=0;e<t.length;e++)t[e].coordinate=t[e].x+","+t[e].y+","+t[e].z;return t},addStation:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({type:"error",message:"表格验证失败"}),!1;d.a.addStation(e.addForm).then(function(){e.getStationInfo(),e.dialogAddStation=!1},function(t){-1!==t.body.indexOf("Insert failed, duplicate id")&&e.$message({type:"error",message:"添加失败,nodeID相同"})})})},updateStation:function(t){var e=this;this.$refs[t].validate(function(t){t?d.a.updateStation(e.form.id,e.form).then(function(){e.$message({type:"success",message:"更新成功"}),e.dialogEditStation=!1,e.getStationInfo()},function(){e.$message({type:"error",message:"更新失败"})}):e.$message({type:"error",message:"表格验证失败"})})},cancelInfo:function(t){this.dialogEditStation=!1,this.$refs[t].resetFields()},cancelAdd:function(t){this.dialogAddStation=!1,this.$refs[t].resetFields()},deleteStation:function(t,e){var a=this;return r.a.resolve().then(function(){return a.$confirm("确定要删除此基站？","警告",{confirmButtonText:"确定",cancelButtonText:"取消"})}).then(function(){return d.a.deleteStation(e[t].id).then(function(){return a.getStationInfo()}).then(function(){a.$message({type:"success",message:"删除成功"})},function(){a.$message({type:"error",message:"删除失败"})})})},restartWrapper:function(){var t=this;return d.a.restartWrapper().then(function(){t.$message({type:"success",message:"重启成功"})},function(){t.$message({type:"error",message:"重启失败"})})},stopWrapper:function(){var t=this;return d.a.stopWrapper().then(function(){t.$message({type:"success",message:"服务停止"})},function(){t.$message({type:"error",message:"停止失败"})})}}}},"DtE+":function(t,e){},Dx2y:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("sidebar"),t._v(" "),a("el-row",[a("el-col",{staticClass:"stationManageTitle",attrs:{span:14,offset:5}},[t._v("\n            基站管理\n            "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(e){t.dialogAddStation=!0}}},[t._v("\n                添加\n            ")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text",icon:"el-icon-refresh"},on:{click:t.restartWrapper}},[t._v("\n                重启服务\n            ")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text",icon:"el-icon-circle-close-outline"},on:{click:t.stopWrapper}},[t._v("\n                停止服务\n            ")])],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"stationManage",staticStyle:{"margin-bottom":"20px"},attrs:{span:18,offset:5}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"nodeID",label:"节点ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",sortable:"",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(2==e.row.nodeType?"UWB":"GNSS"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"coordinate",label:"坐标"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.openEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"stationManageRe",attrs:{size:"small",type:"text"},nativeOn:{click:function(a){a.preventDefault(),t.deleteStation(e.$index,t.tableData)}}},[t._v("删除\n                        ")])]}}])})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.dialogEditStation,top:"5%",modal:!0,"show-close":!1},on:{"update:visible":function(e){t.dialogEditStation=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,labelPosition:"left"}},[a("el-form-item",{attrs:{label:"节点ID",prop:"nodeID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",disabled:!0,autoComplete:"off",placeholder:"节点ID"},model:{value:t.form.nodeID,callback:function(e){t.$set(t.form,"nodeID",t._n(e))},expression:"form.nodeID"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"节点名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"nodeType","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"类型"},model:{value:t.form.nodeType,callback:function(e){t.$set(t.form,"nodeType",e)},expression:"form.nodeType"}},[a("el-option",{attrs:{label:"GNSS",value:1}}),t._v(" "),a("el-option",{attrs:{label:"UWB",value:2}})],1)],1),t._v(" "),2==t.form.nodeType?a("el-form-item",{attrs:{label:"delaySend",prop:"delaySend","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.form.delaySend,callback:function(e){t.$set(t.form,"delaySend",e)},expression:"form.delaySend"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"x",prop:"x","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.form.x,callback:function(e){t.$set(t.form,"x",e)},expression:"form.x"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"y",prop:"y","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{placeholder:""},model:{value:t.form.y,callback:function(e){t.$set(t.form,"y",e)},expression:"form.y"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"z",prop:"z","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.form.z,callback:function(e){t.$set(t.form,"z",e)},expression:"form.z"}})],1),t._v(" "),1==t.form.nodeType?a("el-form-item",[a("el-switch",{attrs:{"active-text":"动态","inactive-text":"静态"},model:{value:t.form.is_moving,callback:function(e){t.$set(t.form,"is_moving",e)},expression:"form.is_moving"}})],1):t._e(),t._v(" "),2==t.form.nodeType?a("el-form-item",{attrs:{label:"channel",prop:"channel","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.form.channel,callback:function(e){t.$set(t.form,"channel",e)},expression:"form.channel"}})],1):t._e(),t._v(" "),2==t.form.nodeType?a("el-form-item",{attrs:{label:"headLength",prop:"headLength","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.form.headLength,callback:function(e){t.$set(t.form,"headLength",e)},expression:"form.headLength"}})],1):t._e(),t._v(" "),2==t.form.nodeType?a("el-form-item",{attrs:{label:"headCode",prop:"headCode","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.form.headCode,callback:function(e){t.$set(t.form,"headCode",e)},expression:"form.headCode"}})],1):t._e(),t._v(" "),2==t.form.nodeType?a("el-form-item",{attrs:{label:"PRF",prop:"PRF","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.form.PRF,callback:function(e){t.$set(t.form,"PRF",e)},expression:"form.PRF"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelInfo("form")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateStation("form")}}},[t._v("保存")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加基站",visible:t.dialogAddStation,top:"5%",modal:!0,"show-close":!1},on:{"update:visible":function(e){t.dialogAddStation=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.rules,labelPosition:"left"}},[a("el-form-item",{attrs:{label:"节点ID",prop:"nodeID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"节点ID"},model:{value:t.addForm.nodeID,callback:function(e){t.$set(t.addForm,"nodeID",t._n(e))},expression:"addForm.nodeID"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"节点名称"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"nodeType","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"类型"},model:{value:t.addForm.nodeType,callback:function(e){t.$set(t.addForm,"nodeType",e)},expression:"addForm.nodeType"}},[a("el-option",{attrs:{label:"GNSS",value:1}}),t._v(" "),a("el-option",{attrs:{label:"UWB",value:2}})],1)],1),t._v(" "),2==t.addForm.nodeType?a("el-form-item",{attrs:{label:"delaySend",prop:"delaySend","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.addForm.delaySend,callback:function(e){t.$set(t.addForm,"delaySend",e)},expression:"addForm.delaySend"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"x",prop:"x","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.addForm.x,callback:function(e){t.$set(t.addForm,"x",e)},expression:"addForm.x"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"y",prop:"y","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{placeholder:""},model:{value:t.addForm.y,callback:function(e){t.$set(t.addForm,"y",e)},expression:"addForm.y"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"z",prop:"z","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.addForm.z,callback:function(e){t.$set(t.addForm,"z",e)},expression:"addForm.z"}})],1),t._v(" "),1==t.addForm.nodeType?a("el-form-item",[a("el-switch",{attrs:{"active-text":"动态","inactive-text":"静态"},model:{value:t.addForm.is_moving,callback:function(e){t.$set(t.addForm,"is_moving",e)},expression:"addForm.is_moving"}})],1):t._e(),t._v(" "),2==t.addForm.nodeType?a("el-form-item",{attrs:{label:"channel",prop:"channel","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.addForm.channel,callback:function(e){t.$set(t.addForm,"channel",e)},expression:"addForm.channel"}})],1):t._e(),t._v(" "),2==t.addForm.nodeType?a("el-form-item",{attrs:{label:"headLength",prop:"headLength","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.addForm.headLength,callback:function(e){t.$set(t.addForm,"headLength",e)},expression:"addForm.headLength"}})],1):t._e(),t._v(" "),2==t.addForm.nodeType?a("el-form-item",{attrs:{label:"headCode",prop:"headCode","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.addForm.headCode,callback:function(e){t.$set(t.addForm,"headCode",e)},expression:"addForm.headCode"}})],1):t._e(),t._v(" "),2==t.addForm.nodeType?a("el-form-item",{attrs:{label:"PRF",prop:"PRF","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{autoComplete:"off",placeholder:""},model:{value:t.addForm.PRF,callback:function(e){t.$set(t.addForm,"PRF",e)},expression:"addForm.PRF"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelAdd("addForm")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addStation("addForm")}}},[t._v("保存并写入")])],1)],1)],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},EQcD:function(t,e){},FqZ1:function(t,e,a){"use strict";var o=a("/gkx"),r=a("IwYW"),n=a("VU/8"),i=n(o.a,r.a,!1,null,null,null);e.a=i.exports},H5AD:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sidebar"),t._v(" "),a("el-row",[a("el-col",{staticClass:"stationManageTitle",attrs:{span:14,offset:5}},[t._v("\n            标签管理\n            "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(e){t.dialogAddLabel=!0}}},[t._v("添加\n            ")])],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"stationManage",attrs:{span:18,offset:5}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"nodeID",label:"节点ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"电量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:e.row.status<30?"danger":"success"}},[t._v("\n                            "+t._s(e.row.status)+"\n                        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"coordinate",label:"坐标"}}),t._v(" "),a("el-table-column",{attrs:{prop:"anchors",label:"相关基站"}}),t._v(" "),a("el-table-column",{attrs:{prop:"satNum",label:"卫星数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:e.row.satNum<9?"danger":"success"}},[t._v("\n                            "+t._s(e.row.satNum)+"\n                        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.openEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"stationManageRe",attrs:{size:"small",type:"text"},nativeOn:{click:function(a){a.preventDefault(),t.deleteLabel(e.$index,t.tableData)}}},[t._v("删除\n                        ")])]}}])})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.dialogEditLabel,top:"5%",modal:!0,"show-close":!1},on:{"update:visible":function(e){t.dialogEditLabel=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,labelPosition:"left",rules:t.rules}},[a("el-form-item",{attrs:{label:"节点ID",prop:"nodeID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",disabled:!0,autoComplete:"off",placeholder:"节点ID"},model:{value:t.form.nodeID,callback:function(e){t.$set(t.form,"nodeID",t._n(e))},expression:"form.nodeID"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"节点名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelInfo("form")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateLabel("form")}}},[t._v("保存并写入")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加标签",visible:t.dialogAddLabel,top:"5%",modal:!0,"show-close":!1},on:{"update:visible":function(e){t.dialogAddLabel=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,labelPosition:"left",rules:t.rules}},[a("el-form-item",{attrs:{label:"节点ID",prop:"nodeID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"节点ID"},model:{value:t.addForm.nodeID,callback:function(e){t.$set(t.addForm,"nodeID",t._n(e))},expression:"addForm.nodeID"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"节点名称"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelAdd("addForm")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addLabel("addForm")}}},[t._v("保存并写入")])],1)],1)],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},HG1V:function(t,e,a){"use strict";var o=a("CGpb"),r=a("Dx2y"),n=a("VU/8"),i=n(o.a,r.a,!1,null,null,null);e.a=i.exports},IY2h:function(t,e,a){"use strict";var o=a("mvHQ"),r=a.n(o),n=a("ymcs");e.a={data:function(){return{tableData:[]}},mounted:function(){var t=this;t.tableData=[{type:"",value:""}],n.a.$on("message",function(e){for(var a=!1,o=0;o<t.tableData.length;o++)t.tableData[o].type===e.name&&(a=!0,t.tableData[o].value=r()(e.data));!1===a&&t.tableData.push({type:e.name,value:e.data})}),console.log(window.d3)}}},IwYW:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sidebar"),t._v(" "),a("el-row",[a("el-col",{staticClass:"stationManageTitle",attrs:{span:14,offset:5}},[t._v("\n            设备管理\n            "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(e){t.dialogAddEquipment=!0}}},[t._v("添加\n            ")])],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"stationManage",staticStyle:{"margin-bottom":"20px"},attrs:{span:18,offset:5}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.equipmentData}},[a("el-table-column",{attrs:{prop:"equipment_name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"width",label:"长"}}),t._v(" "),a("el-table-column",{attrs:{prop:"height",label:"宽"}}),t._v(" "),a("el-table-column",{attrs:{prop:"image",label:"图片url"}}),t._v(" "),a("el-table-column",{attrs:{prop:"node_ids",label:"设备构成"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.node_ids.join())+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"style",label:"设备结构"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.openEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"stationManageRe",attrs:{size:"small",type:"text"},nativeOn:{click:function(a){a.preventDefault(),t.deleteEquipment(e.$index,t.equipmentData)}}},[t._v("删除\n                        ")])]}}])})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.dialogEditEquipment,top:"5%",modal:!0,"show-close":!1},on:{"update:visible":function(e){t.dialogEditEquipment=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,labelPosition:"left"}},[a("el-form-item",{attrs:{label:"ID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{disabled:!0},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"equipment_name","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"类型"},model:{value:t.form.equipment_name,callback:function(e){t.$set(t.form,"equipment_name",e)},expression:"form.equipment_name"}},[a("el-option",{attrs:{label:"飞机",value:"飞机"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"长",prop:"width","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"长",value:"form.width"},model:{value:t.form.width,callback:function(e){t.$set(t.form,"width",t._n(e))},expression:"form.width"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"宽",prop:"height","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"宽",value:"form.height"},model:{value:t.form.height,callback:function(e){t.$set(t.form,"height",t._n(e))},expression:"form.height"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"image","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"url",value:"form.image"},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"设备构成","label-width":t.formLabelWidth}},[a("el-checkbox-group",{model:{value:t.form.node_ids,callback:function(e){t.$set(t.form,"node_ids",e)},expression:"form.node_ids"}},t._l(t.allLabels,function(e){return a("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1),t._v(" "),a("el-form-item",{attrs:{label:"设备结构",prop:"style","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"类型"},model:{value:t.form.style,callback:function(e){t.$set(t.form,"style",e)},expression:"form.style"}},[a("el-option",{attrs:{label:"2-littlehead",value:"2-littlehead"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelInfo("form")}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateEquipment("form")}}},[t._v("保存")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加设备",visible:t.dialogAddEquipment,top:"5%",modal:!0,"show-close":!1},on:{"update:visible":function(e){t.dialogAddEquipment=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.rules,labelPosition:"left"}},[a("el-form-item",{attrs:{label:"名称",prop:"equipment_name","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"名称"},model:{value:t.addForm.equipment_name,callback:function(e){t.$set(t.addForm,"equipment_name",e)},expression:"addForm.equipment_name"}},[a("el-option",{attrs:{label:"飞机",value:"飞机"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"长",prop:"width","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"长"},model:{value:t.addForm.width,callback:function(e){t.$set(t.addForm,"width",t._n(e))},expression:"addForm.width"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"宽",prop:"height","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"宽"},model:{value:t.addForm.height,callback:function(e){t.$set(t.addForm,"height",t._n(e))},expression:"addForm.height"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"image","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"url"},model:{value:t.addForm.image,callback:function(e){t.$set(t.addForm,"image",e)},expression:"addForm.image"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"设备构成","label-width":t.formLabelWidth}},[a("el-checkbox-group",{model:{value:t.addForm.node_ids,callback:function(e){t.$set(t.addForm,"node_ids",e)},expression:"addForm.node_ids"}},t._l(t.allLabels,function(e){return a("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1),t._v(" "),a("el-form-item",{attrs:{label:"设备结构",prop:"style","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"类型"},model:{value:t.addForm.style,callback:function(e){t.$set(t.addForm,"style",e)},expression:"addForm.style"}},[a("el-option",{attrs:{label:"2-littlehead",value:"2-littlehead"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelAdd("addForm")}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addEquipment("addForm")}}},[t._v("创建")])],1)],1)],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},M93x:function(t,e,a){"use strict";function o(t){a("EQcD"),a("65du")}var r=a("xJD8"),n=a("obim"),i=a("VU/8"),l=o,s=i(r.a,n.a,!1,l,null,null);e.a=s.exports},MrGL:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signIn"},[a("h3",[t._v(t._s(t.msg))]),t._v(" "),a("div",{staticClass:"SignInInput"},[a("el-input",{attrs:{placeholder:"用户名",size:"large"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),a("div",{staticClass:"SignInInput "},[a("el-input",{attrs:{placeholder:"密码",type:"password",size:"large"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("div",{staticClass:"SignInInput"},[a("el-button",{staticClass:"SignInButton",attrs:{type:"primary",size:"large"},on:{click:t.login}},[t._v("登录")])],1)])},r=[],n={render:o,staticRenderFns:r};e.a=n},N1j8:function(t,e,a){"use strict";var o=a("//Fk"),r=a.n(o),n=a("mvHQ"),i=a.n(n),l=a("ymcs"),s=a("9Yo3"),d=a("hYcz"),u=a("01Oi"),c=a("S9gf");e.a={data:function(){return{startDataSelect:{disabledDate:function(t){return t.getTime()>Date.now()}},endDataSelect:{disabledDate:function(t){return t.getTime()>Date.now()}},realDataInfo:{rotationAngle:{},coordinate:{},rtkStationData:[],labelData:[],uwbStationData:[]},historyDataInfo:{rotationAngle:{},coordinate:{},labelData:[],rtkStationData:[],uwbStationData:[]},windowWidth:0,region:[],reset:"",blockShow:!0,clear:!1,equipment:[],activeNode:"labelChange",isRealTimeData:!0,startIndex:0,playState:"播放",speed:"×2",isProgressBar:!1,isTimeSelect:!1,allTime:"",startDate:"",startTime:"",endDate:"",endTime:"",playProgress:0,playTime:"0:0",historyStatus:!1}},components:{controlMap:s.a,sidebar:u.a,nodeList:d.a},mounted:function(){this.getUwbStationInfo(),this.getGnssStationInfo(),this.getLabelInfo(),this.getRegion();var t=this;!0===t.isRealTimeData&&(t.realDataInfo.coordinate={stationInfo:{},labelInfo:{}},l.a.$on("rtkres_roverpos",function(e){t.realDataInfo.labelData=t.updateLabel(t.realDataInfo.labelData,e,1),t.realDataInfo.coordinate=t.roverCoor(t.realDataInfo.labelData,t.realDataInfo.coordinate,e,1)}),l.a.$on("user_uwb",function(e){t.realDataInfo.labelData=t.updateLabel(t.realDataInfo.labelData,e,1),t.realDataInfo.coordinate=t.roverCoor(t.realDataInfo.labelData,t.realDataInfo.coordinate,e,1)}),l.a.$on("user_stat",function(e){t.realDataInfo.labelData=t.updateLabel(t.realDataInfo.labelData,e,1)}),l.a.$on("rtkres_attitude",function(e){t.realDataInfo.rotationAngle=t.updateRotationAngle(t.realDataInfo.rotationAngle,e)}),l.a.$on("status",function(e){t.realDataInfo.uwbStationData=t.setTableStatus(t.realDataInfo.uwbStationData,e),t.realDataInfo.rtkStationData=t.setTableStatus(t.realDataInfo.rtkStationData,e),t.realDataInfo.labelData=t.setTableStatus(t.realDataInfo.labelData,e)})),window.onresize=function(){t.windowWidth=document.body.offsetWidth}},watch:{playProgress:function(){var t=this;100==t.playProgress&&(t.playState="播放")}},methods:{getLabelInfo:function(){var t=this;return c.a.getLabels().then(function(e){for(var a=["Crimson","Blue","PaleVioletRed","DarkCyan","DarkMagenta","Indigo","Cyan","DarkSlateGray","DoderBlue","SeaGreen","Lime","Yellow","Olive","GoldEnrod","SaddleBrown","RosyBrown","Black","Silver"],o=0;o<e.length;o++)e[o].color=a.shift()||"#"+(16777215*Math.random()<<0).toString(16);return t.realDataInfo.labelData=JSON.parse(i()(e)),t.historyDataInfo.labelData=JSON.parse(i()(e)),r.a.resolve()})},getUwbStationInfo:function(){var t=this;return c.a.getUwbStations().then(function(e){for(var a=0;a<e.length;a++)e[a].coordinate=e[a].x+","+e[a].y+","+e[a].z;return t.realDataInfo.uwbStationData=JSON.parse(i()(e)),t.realDataInfo.coordinate=t.baseCoor(t.realDataInfo.uwbStationData,t.realDataInfo.coordinate),r.a.resolve()})},getGnssStationInfo:function(){var t=this;return c.a.getGnssStations().then(function(e){for(var a=0;a<e.length;a++)e[a].coordinate=e[a].x+","+e[a].y+","+e[a].z;return t.realDataInfo.rtkStationData=JSON.parse(i()(e)),setInterval(function(){t.realDataInfo.coordinate=t.baseCoor(t.realDataInfo.rtkStationData,t.realDataInfo.coordinate)}),r.a.resolve()})},updateLabel:function(t,e,a){for(var o=0;o<t.length;o++)Number(e.nodeID)===Number(t[o].nodeID)&&(void 0!==e.battery&&(t[o].status=e.battery),void 0!==e.x&&(""!==e.z?0==e.stat||(t[o].coordinate=e.x/a+","+e.y/a+","+e.z/a):t[o].coordinate=e.x/a+","+e.y/a),void 0!==e.anchors&&(t[o].anchors=e.anchors.join()),void 0!==e.satNum&&(0==e.stat||(t[o].satNum=e.satNum)));return JSON.parse(i()(t))},setTableStatus:function(t,e){for(var a=0;a<t.length;a++){for(var o=0;o<e.rtk.bases.length;o++)t[a].nodeID==e.rtk.bases[o].nodeID&&(t[a].status=e.rtk.bases[o].stat);for(var r=0;r<e.uwb.bases.length;r++)t[a].nodeID==e.uwb.bases[r].nodeID&&(t[a].status=e.uwb.bases[r].stat)}return t},showRealTimeData:function(){this.initHistroy();var t=this;t.isRealTimeData=!0,t.blockShow=!t.blockShow,window.clearInterval(t.isStartPlay)},showHistoryData:function(){var t=this;t.isRealTimeData=!1,t.isTimeSelect=!0,window.clearInterval(t.isStartPlay)},progressBarShow:function(){this.isRealTimeData=!0},play:function(){var t=this;"播放"==t.playState?(t.playState="暂停",t.startPlay(t.frequency)):(t.playState="播放",window.clearInterval(t.isStartPlay))},doublePlay:function(){var t=this;t.playState="暂停","×1"==t.speed?(t.speed="×2",t.frequency=1e3):(t.speed="×1",t.frequency=500),t.startPlay(t.frequency)},timeSelect:function(){var t=this;return""==this.startTime||""==this.endTime||""==this.startDate||""==this.endDate?t.$message({type:"error",message:"时间选择不完整,请检查"}):this.startDate>this.endDate||i()(this.startDate)==i()(this.endDate)&&this.startTime>this.endTime?t.$message({type:"error",message:"时间范围选择错误"}):(window.clearInterval(t.isStartPlay),t.initHistroy(),void t.createHistoryDate())},createHistoryDate:function(){var t=this,e=this.startDate.toLocaleString().split(" ")[0]+" "+this.startTime.toTimeString().split(" ")[0],a=this.endDate.toLocaleString().split(" ")[0]+" "+this.endTime.toTimeString().split(" ")[0];if(t.historyStatus)return t.$message({type:"error",message:"数据正在处理"});t.historyStatus=!0,c.a.getHistoryDataFile(e,a).then(function(o){return t.getHistoryDataFile(e,a,o),r.a.resolve()}),c.a.getAllHistoryInfo(e,a).then(function(e){console.log(i()(e.labelHistoryInfo)),t.historyConfigInfos=e.labelHistoryInfo})},getHistoryDataFile:function(t,e,a){var o=this;"false"===a?o.$message({type:"error",message:"连接超时"}):(o.historyInfos=a,o.allTime=o.getAllTime(t,e),o.isProgressBar=!0,o.historyStatus=!1)},getAllTime:function(t,e){var a=parseInt(new Date(e).getTime()-new Date(t).getTime())/1e3,o=a/60,r="0."+String(o).split(".")[1];return parseInt(o)+":"+String(60*parseFloat(r)).split(".")[0]},initHistroy:function(){var t=this;t.startIndex=0,t.playProgress=0,t.isProgressBar=!1,t.isTimeSelect=!1,t.historyDataInfo.labelData=[],t.historyDataInfo.uwbStationData=[],t.historyDataInfo.rtkStationData=[],t.historyDataInfo.rotationAngle=[],t.playTime="0:0",t.playState="播放",t.speed="×2",t.frequency=1e3,t.historyInfos=void 0},startPlay:function(t){var e=this;return void 0===e.historyInfos?(e.playState="播放",e.$message({type:"error",message:"数据正在加载中..."})):0==e.historyInfos.length?e.$message({type:"error",message:"该时间段数据为空"}):(window.clearInterval(e.isStartPlay),void(e.isStartPlay=setInterval(function(){if(e.startIndex>=e.historyInfos.length)return window.clearInterval(e.isStartPlay);e.showData(e.startIndex);var t=parseInt(100*e.startIndex/e.historyInfos.length);t<parseInt(100/e.historyInfos.length*(e.historyInfos.length-1))?e.playProgress=0==t?parseInt(100/e.historyInfos.length):parseInt(100*(e.startIndex+1)/e.historyInfos.length):e.startIndex==e.historyInfos.length-1&&(e.playProgress=100),e.startIndex++,e.hadPlayTime(e.startIndex)},t)))},hadPlayTime:function(t){var e=this,a=t/60,o="0."+String(a).split(".")[1];e.playTime=parseInt(a)+":"+String(60*parseFloat(o)).split(".")[0]},showData:function(t){var e=this,a=e.historyInfos[t];if(e.getHistoryTable(a,e.historyConfigInfos),e.historyDataInfo.coordinate={stationInfo:{},labelInfo:{}},e.historyDataInfo.coordinate=e.baseCoor(e.historyDataInfo.uwbStationData,e.historyDataInfo.coordinate),e.historyDataInfo.coordinate=e.baseCoor(e.historyDataInfo.rtkStationData,e.historyDataInfo.coordinate),void 0!==a.user_uwb)for(var o=0;o<a.user_uwb.length;o++)e.historyDataInfo.labelData=e.updateLabel(e.historyDataInfo.labelData,a.user_uwb[o],500),e.historyDataInfo.coordinate=e.roverCoor(e.historyDataInfo.labelData,e.historyDataInfo.coordinate,a.user_uwb[o],500);if(void 0!==a.rtkres_roverpos)for(var o=0;o<a.rtkres_roverpos.length;o++)e.historyDataInfo.labelData=e.updateLabel(e.historyDataInfo.labelData,a.rtkres_roverpos[o],1e3),e.historyDataInfo.coordinate=e.roverCoor(e.historyDataInfo.labelData,e.historyDataInfo.coordinate,a.rtkres_roverpos[o],1e3);if(void 0!==a.rtkres_attitude)for(var o=0;o<a.rtkres_attitude.length;o++){var r=a.rtkres_attitude[o];e.historyDataInfo.rotationAngle=e.updateRotationAngle(e.historyDataInfo.rotationAngle,r)}if(void 0!==a.user_stat)for(var o=0;o<a.user_stat.length;o++)e.historyDataInfo.labelData=e.updateLabel(e.historyDataInfo.labelData,a.user_stat[o],1);if(void 0!==a.status)for(var o=0;o<a.status.length;o++){var n=a.status[o];e.historyDataInfo.uwbStationData=e.setTableStatus(e.historyDataInfo.uwbStationData,n),e.historyDataInfo.rtkStationData=e.setTableStatus(e.historyDataInfo.rtkStationData,n),e.historyDataInfo.labelData=e.setTableStatus(e.historyDataInfo.labelData,n)}},getRegion:function(){var t=this;c.a.getAreas().then(function(e){return t.region=JSON.parse(i()(e)),r.a.resolve()}),c.a.getEquipments().then(function(e){return t.equipment=JSON.parse(i()(e)),r.a.resolve()})},updateRotationAngle:function(t,e){return t.firstangle=Number(e.elevationAngle/1e3),t.secondangle=Number(e.rollingAngle/1e3),t.thirdangle=Number(e.courseAngle/1e3),t},baseCoor:function(t,e){for(var a=0;a<t.length;a++)e.stationInfo[t[a].nodeID]=[t[a].x,t[a].y,t[a].name];return JSON.parse(i()(e))},roverCoor:function(t,e,a,o){for(var r=0;r<t.length;r++)if(Number(a.nodeID)===Number(t[r].nodeID)){var n=Number(a.x/o),l=Number(a.y/o),s=(new Date).getTime();if(s-t[r].update>1500){var d=s-t[r].update;console.log(t[r].nodeID+" 时间超时 "+parseFloat(d/1e3)+"秒")}e.labelInfo[t[r].nodeID]=[n,l,t[r].name,s,t[r].color]}return JSON.parse(i()(e))},reduction:function(t){this.reset=t+"-"+Math.random()},changeProgress:function(){this.clear=!this.clear,this.startIndex=parseInt(this.playProgress*this.historyInfos.length/100)},getHistoryTable:function(t,e){var a=this;a.historyDataInfo.rtkStationData=[],a.historyDataInfo.uwbStationData=[],a.historyDataInfo.labelData=[];for(var o=["Crimson","Blue","PaleVioletRed","DarkCyan","DarkMagenta","Indigo","Cyan","DarkSlateGray","DoderBlue","SeaGreen","Lime","Yellow","Olive","GoldEnrod","SaddleBrown","RosyBrown","Black","Silver"],r=0;r<e.length;r++){for(var n=e[r],i=[],l=[],s=null,d=0;d<n.length;d++)n[d].updateDate<=t.timestamp?i.push(n[d]):l.push(n[d]);if(0!==i.length)for(var u=0;u<i.length;u++)s=null==s?i[u]:Math.abs(s.updateDate-t.timestamp)>Math.abs(i[u].updateDate-t.timestamp)?i[u]:s;else for(var u=0;u<l.length;u++)s=null==s?l[u]:Math.abs(s.updateDate-t.timestamp)>Math.abs(l[u].updateDate-t.timestamp)?l[u]:s;null!==s&&(s.updateDate<=t.timestamp?void 0!==s.delete||(1==s.afterUpdateInfo.nodeType&&(s.afterUpdateInfo.coordinate=s.afterUpdateInfo.x+","+s.afterUpdateInfo.y+","+s.afterUpdateInfo.z,a.historyDataInfo.rtkStationData.push(s.afterUpdateInfo)),2==s.afterUpdateInfo.nodeType&&(s.afterUpdateInfo.coordinate=s.afterUpdateInfo.x+","+s.afterUpdateInfo.y+","+s.afterUpdateInfo.z,a.historyDataInfo.uwbStationData.push(s.afterUpdateInfo)),3==s.afterUpdateInfo.nodeType&&(s.afterUpdateInfo.color=o.shift()||"#"+(16777215*Math.random()<<0).toString(16),a.historyDataInfo.labelData.push(s.afterUpdateInfo))):void 0!==s.delete||null!==s.beforeUpdateInfo&&(1==s.beforeUpdateInfo.nodeType&&(s.beforeUpdateInfo.coordinate=s.beforeUpdateInfo.x+","+s.beforeUpdateInfo.y+","+s.beforeUpdateInfo.z,a.historyDataInfo.rtkStationData.push(s.beforeUpdateInfo)),2==s.beforeUpdateInfo.nodeType&&(s.beforeUpdateInfo.coordinate=s.beforeUpdateInfo.x+","+s.beforeUpdateInfo.y+","+s.beforeUpdateInfo.z,a.historyDataInfo.uwbStationData.push(s.beforeUpdateInfo)),3==s.beforeUpdateInfo.nodeType&&(s.beforeUpdateInfo.color=o.shift()||"#"+(16777215*Math.random()<<0).toString(16),a.historyDataInfo.labelData.push(s.beforeUpdateInfo))))}}}}},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("7+uW"),r=a("ORbq"),n=a("ogKe"),i=a("M93x"),l=a("YaEn"),s=a("zL8q"),d=a.n(s),u=a("tvR6"),c=(a.n(u),a("01Oi"));o.default.config.productionTip=!1,o.default.use(d.a),o.default.use(r.a),o.default.use(n.a),o.default.component("sidebar",c.a),new o.default({el:"#app",router:l.a,template:"<App/>",components:{App:i.a}})},NLBK:function(t,e,a){"use strict";var o=a("7SRB"),r=a("H5AD"),n=a("VU/8"),i=n(o.a,r.a,!1,null,null,null);e.a=i.exports},Ovih:function(t,e){},"Q+t5":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("sidebar"),t._v(" "),a("el-row",[a("el-col",{staticClass:"stationManageTitle",attrs:{span:14,offset:5}},[t._v("\n            UWB配置管理\n            "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){t.dialogEditUWB=!0}}},[t._v("\n                修改\n            ")])],1)],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:18,offset:5}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.uwbData}},[a("el-table-column",{attrs:{label:"limit"}},[a("el-table-column",{attrs:{prop:"limit.hightLimit",label:"hightLimit"}}),t._v(" "),a("el-table-column",{attrs:{prop:"limit.vLimit",label:"vLimit"}})],1),t._v(" "),a("el-table-column",{attrs:{label:"threshold"}},[a("el-table-column",{attrs:{prop:"threshold.C21",label:"C21"}}),t._v(" "),a("el-table-column",{attrs:{prop:"threshold.C22",label:"C22"}})],1),t._v(" "),a("el-table-column",{attrs:{prop:"IterNum",label:"IterNum"}}),t._v(" "),a("el-table-column",{attrs:{prop:"positionMargin",label:"positionMargin"}}),t._v(" "),a("el-table-column",{attrs:{prop:"positionNumToPick",label:"positionNumToPick"}}),t._v(" "),a("el-table-column",{attrs:{prop:"portToUWBLib",label:"portToUWBLib"}}),t._v(" "),a("el-table-column",{attrs:{prop:"logLevel",label:"logLevel"}}),t._v(" "),a("el-table-column",{attrs:{prop:"recorder",label:"recorder"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"stationManageTitle",attrs:{span:14,offset:5}},[t._v("\n            RTK配置管理\n            "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){t.dialogEditRTK=!0}}},[t._v("\n                修改\n            ")])],1)],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:18,offset:5}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rtkData}},[a("el-table-column",{attrs:{prop:"InputStream_type",label:"InputStream_type"}}),t._v(" "),a("el-table-column",{attrs:{prop:"InputStream_file",label:"InputStream_file"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Log_InputData",label:"Log_InputData"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Log_OutputData",label:"Log_OutputData"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Log_RoverSol",label:"Log_RoverSol"}})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改",visible:t.dialogEditUWB,top:"5%",modal:!0,"show-close":!1},on:{"update:visible":function(e){t.dialogEditUWB=e}}},[a("el-form",{ref:"uwbForm",attrs:{model:t.uwbForm,rules:t.rules,labelPosition:"left"}},[a("el-form-item",{attrs:{label:"limit",prop:"limit","label-width":t.formLabelWidth}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"hightLimit"},model:{value:t.uwbForm.limit.hightLimit,callback:function(e){t.$set(t.uwbForm.limit,"hightLimit",t._n(e))},expression:"uwbForm.limit.hightLimit"}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"vLimit"},model:{value:t.uwbForm.limit.vLimit,callback:function(e){t.$set(t.uwbForm.limit,"vLimit",e)},expression:"uwbForm.limit.vLimit"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"threshold",prop:"threshold","label-width":t.formLabelWidth}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"C21"},model:{value:t.uwbForm.threshold.C21,callback:function(e){t.$set(t.uwbForm.threshold,"C21",t._n(e))},expression:"uwbForm.threshold.C21"}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"C22"},model:{value:t.uwbForm.threshold.C22,callback:function(e){t.$set(t.uwbForm.threshold,"C22",t._n(e))},expression:"uwbForm.threshold.C22"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"IterNum",prop:"IterNum","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"IterNum"},model:{value:t.uwbForm.IterNum,callback:function(e){t.$set(t.uwbForm,"IterNum",t._n(e))},expression:"uwbForm.IterNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"positionMargin",prop:"positionMargin","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"positionMargin"},model:{value:t.uwbForm.positionMargin,callback:function(e){t.$set(t.uwbForm,"positionMargin",t._n(e))},expression:"uwbForm.positionMargin"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"positionNumToPick",prop:"positionNumToPick","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"positionMargin"},model:{value:t.uwbForm.positionNumToPick,callback:function(e){t.$set(t.uwbForm,"positionNumToPick",t._n(e))},expression:"uwbForm.positionNumToPick"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"portToUWBLib",prop:"portToUWBLib","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"portToUWBLib"},model:{value:t.uwbForm.portToUWBLib,callback:function(e){t.$set(t.uwbForm,"portToUWBLib",t._n(e))},expression:"uwbForm.portToUWBLib"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"logLevel",prop:"logLevel","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"logLevel"},model:{value:t.uwbForm.logLevel,callback:function(e){t.$set(t.uwbForm,"logLevel",e)},expression:"uwbForm.logLevel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"recorder",prop:"recorder","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"recorder"},model:{value:t.uwbForm.recorder,callback:function(e){t.$set(t.uwbForm,"recorder",e)},expression:"uwbForm.recorder"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelInfo("uwbForm")}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateUWB("uwbForm")}}},[t._v("保存")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改",visible:t.dialogEditRTK,top:"5%",modal:!0,"show-close":!1},on:{"update:visible":function(e){t.dialogEditRTK=e}}},[a("el-form",{ref:"rtkForm",attrs:{model:t.rtkForm,rules:t.rules,labelPosition:"left"}},[a("el-form-item",{attrs:{label:"InputStream_type",prop:"InputStream_type","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"InputStream_type"},model:{value:t.rtkForm.InputStream_type,callback:function(e){t.$set(t.rtkForm,"InputStream_type",t._n(e))},expression:"rtkForm.InputStream_type"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"InputStream_file",prop:"InputStream_file","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"InputStream_file"},model:{value:t.rtkForm.InputStream_file,callback:function(e){t.$set(t.rtkForm,"InputStream_file",e)},expression:"rtkForm.InputStream_file"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Log_InputData",prop:"Log_InputData","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"Log_InputData"},model:{value:t.rtkForm.Log_InputData,callback:function(e){t.$set(t.rtkForm,"Log_InputData",t._n(e))},expression:"rtkForm.Log_InputData"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Log_OutputData",prop:"Log_OutputData","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"Log_OutputData"},model:{value:t.rtkForm.Log_OutputData,callback:function(e){t.$set(t.rtkForm,"Log_OutputData",t._n(e))},expression:"rtkForm.Log_OutputData"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Log_RoverSol",prop:"Log_RoverSol","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"Log_RoverSol"},model:{value:t.rtkForm.Log_RoverSol,callback:function(e){t.$set(t.rtkForm,"Log_RoverSol",t._n(e))},expression:"rtkForm.Log_RoverSol"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelInfo("rtkForm")}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateRTK("rtkForm")}}},[t._v("保存")])],1)],1)],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},RnuQ:function(t,e,a){"use strict";function o(t){a("DtE+")}var r=a("N1j8"),n=a("UGeh"),i=a("VU/8"),l=o,s=i(r.a,n.a,!1,l,null,null);e.a=s.exports},S9gf:function(t,e,a){"use strict";var o=a("//Fk"),r=a.n(o),n=a("7+uW");e.a={addArea:function(t){return n.default.http.post(window.url+"/areas",t)},getAreas:function(){return n.default.http.get(window.url+"/areas").then(function(t){return r.a.resolve(t.body)})},deleteArea:function(t){return n.default.http.delete(window.url+"/areas/"+t)},updateArea:function(t,e){return n.default.http.put(window.url+"/areas/"+t,e)},addEquipment:function(t){return n.default.http.post(window.url+"/vehicle",t)},getEquipments:function(){return n.default.http.get(window.url+"/vehicle").then(function(t){return r.a.resolve(t.body)})},deleteEquipment:function(t){return n.default.http.delete(window.url+"/vehicle/"+t)},updateEquipment:function(t,e){return n.default.http.put(window.url+"/vehicle/"+t,e)},getStations:function(){return n.default.http.get(window.url+"/nodes?nodeType=1&nodeType=2").then(function(t){return r.a.resolve(t.body)})},getUwbStations:function(){return n.default.http.get(window.url+"/nodes?nodeType=2").then(function(t){return r.a.resolve(t.body)})},getGnssStations:function(){return n.default.http.get(window.url+"/nodes?nodeType=1").then(function(t){return r.a.resolve(t.body)})},getLabels:function(){return n.default.http.get(window.url+"/nodes?nodeType=3").then(function(t){return r.a.resolve(t.body)})},updateStation:function(t,e){return n.default.http.put(window.url+"/nodes/"+t,e)},addStation:function(t){return n.default.http.post(window.url+"/nodes",t)},deleteStation:function(t){return n.default.http.delete(window.url+"/nodes/"+t)},restartWrapper:function(){return n.default.http.get(window.url+"/wrapper/restart")},stopWrapper:function(){return n.default.http.get(window.url+"/wrapper/stop")},getHistoryDataFile:function(t,e){return n.default.http.get(window.url+"/getHistoryDataFile?startTime="+new Date(t).getTime()+"&endTime="+new Date(e).getTime()).then(function(t){return r.a.resolve(t.body)})},getAllHistoryInfo:function(t,e){return n.default.http.get(window.url+"/getAllHistoryInfo?startTime="+new Date(t).getTime()+"&endTime="+new Date(e).getTime()).then(function(t){return r.a.resolve(t.body)})},getUser:function(t,e){return n.default.http.post(window.url+"/login",{username:t,password:e}).then(function(t){return r.a.resolve(t.body)})},isLogin:function(){return n.default.http.get(window.url+"/isLogin").then(function(t){return r.a.resolve(t.body)})},getUWB:function(){return n.default.http.get(window.url+"/uwb").then(function(t){return r.a.resolve(t.body)})},updateUWB:function(t){return n.default.http.put(window.url+"/uwb",t)},getRTK:function(){return n.default.http.get(window.url+"/rtk").then(function(t){return r.a.resolve(t.body)})},updateRTK:function(t){return n.default.http.put(window.url+"/rtk",t)}}},UGeh:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("sidebar"),t._v(" "),a("el-row",[a("el-col",{staticClass:"panel-title-button",attrs:{span:14,offset:5}},[a("el-button-group",[a("el-button",{attrs:{plain:!0},on:{click:t.showRealTimeData}},[t._v("实时数据")]),t._v(" "),a("el-button",{staticClass:"panelButtonLeft",attrs:{plain:!0},on:{click:t.showHistoryData}},[t._v("历史数据")])],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isRealTimeData,expression:"isRealTimeData"}]},[a("el-row",{staticClass:"row-bg"},[a("el-col",{attrs:{span:18,offset:5}},[a("el-card",{staticClass:"box-card"},[a("div",[t._v("舰船情况")]),t._v(" "),a("div",{staticClass:"euler-angle"},[a("p",{staticClass:"number"},[t._v(t._s(t.realDataInfo.rotationAngle.firstangle))]),t._v(" "),a("span",{staticClass:"unit"},[t._v("俯仰")])]),t._v(" "),a("div",{staticClass:"euler-angle"},[a("p",{staticClass:"number"},[t._v(t._s(t.realDataInfo.rotationAngle.secondangle))]),t._v(" "),a("span",{staticClass:"unit"},[t._v("横滚")])]),t._v(" "),a("div",{staticClass:"euler-angle"},[a("p",{staticClass:"number"},[t._v(t._s(t.realDataInfo.rotationAngle.thirdangle))]),t._v(" "),a("span",{staticClass:"unit"},[t._v("偏航")])])])],1)],1),t._v(" "),t._l(t.region,function(e,o){return t.region.length>0?a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-row",{staticClass:"row-bg"},[a("el-col",{attrs:{span:18,offset:5}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"father"},[t._v("\n                            "+t._s(e.region_name)+"\n                            "),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:function(a){t.reduction(e.region_name)}}},[t._v("重置\n                            ")])],1),t._v(" "),a("div",{staticClass:"heightblock"},[a("div",{staticClass:"testblock"},[a("controlMap",{staticClass:"first-region",attrs:{blockId:e.region_name,coordinate:t.realDataInfo.coordinate,windowWidth:t.windowWidth,region:t.region,regionName:e.region_name,reset:t.reset,equipment:t.equipment}})],1)])])],1)],1)],1):t._e()}),t._v(" "),a("el-row",{staticClass:"row-bg"},[a("el-col",{attrs:{span:18,offset:5}},[a("el-tabs",{model:{value:t.activeNode,callback:function(e){t.activeNode=e},expression:"activeNode"}},[a("el-tab-pane",{attrs:{label:"标签节点",name:"labelChange"}},[a("nodeList",{staticClass:"table",attrs:{url:"label",tableData:t.realDataInfo.labelData}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"UWB基站节点",name:"UWBstationChange"}},[a("nodeList",{staticClass:"table",attrs:{url:"station",tableData:t.realDataInfo.uwbStationData}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"GNSS基站节点",name:"RTKstationChange"}},[a("nodeList",{staticClass:"table",attrs:{url:"station",tableData:t.realDataInfo.rtkStationData}})],1)],1)],1)],1)],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isRealTimeData,expression:"!isRealTimeData"}]},[a("el-row",{staticClass:"row-bg"},[a("el-col",{attrs:{span:18,offset:5}},[a("el-card",{staticClass:"box-card"},[a("div",[t._v("舰船情况")]),t._v(" "),a("div",{staticClass:"euler-angle"},[a("p",{staticClass:"number"},[t._v(t._s(t.historyDataInfo.rotationAngle.firstangle))]),t._v(" "),a("span",{staticClass:"unit"},[t._v("俯仰")])]),t._v(" "),a("div",{staticClass:"euler-angle"},[a("p",{staticClass:"number"},[t._v(t._s(t.historyDataInfo.rotationAngle.secondangle))]),t._v(" "),a("span",{staticClass:"unit"},[t._v("横滚")])]),t._v(" "),a("div",{staticClass:"euler-angle"},[a("p",{staticClass:"number"},[t._v(t._s(t.historyDataInfo.rotationAngle.thirdangle))]),t._v(" "),a("span",{staticClass:"unit"},[t._v("偏航")])])])],1)],1),t._v(" "),t._l(t.region,function(e,o){return t.region.length>0?a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-row",{staticClass:"row-bg"},[a("el-col",{attrs:{span:18,offset:5}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"father"},[t._v("\n                            "+t._s(e.region_name)+"\n                            "),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:function(a){t.reduction("history"+e.region_name)}}},[t._v("重置\n                            ")])],1),t._v(" "),a("div",{staticClass:"heightblock"},[a("div",{staticClass:"testblock"},[a("controlMap",{staticClass:"first-region",attrs:{blockId:"history"+e.region_name,coordinate:t.historyDataInfo.coordinate,blockShow:t.blockShow,windowWidth:t.windowWidth,region:t.region,regionName:e.region_name,reset:t.reset,clear:t.clear,equipment:t.equipment}})],1)])])],1)],1)],1):t._e()}),t._v(" "),a("el-row",{staticClass:"row-bg"},[a("el-col",{attrs:{span:18,offset:5}},[a("el-tabs",{model:{value:t.activeNode,callback:function(e){t.activeNode=e},expression:"activeNode"}},[a("el-tab-pane",{attrs:{label:"标签节点",name:"labelChange"}},[a("nodeList",{staticClass:"table",attrs:{url:"label",tableData:t.historyDataInfo.labelData}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"UWB基站节点",name:"UWBstationChange"}},[a("nodeList",{staticClass:"table",attrs:{url:"station",tableData:t.historyDataInfo.uwbStationData}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"GNSS基站节点",name:"RTKstationChange"}},[a("nodeList",{staticClass:"table",attrs:{url:"station",tableData:t.historyDataInfo.rtkStationData}})],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"历史数据查询",visible:t.isTimeSelect},on:{"update:visible":function(e){t.isTimeSelect=e}}},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("起始时间")]),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":t.startDataSelect},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" "),a("el-time-picker",{attrs:{placeholder:"任意时间点"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),t._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("截至时间")]),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":t.endDataSelect},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),t._v(" "),a("el-time-picker",{attrs:{placeholder:"任意时间点","picker-options":{minTime:t.startTime}},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.timeSelect}},[t._v("确 定")])],1)]),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.isProgressBar,expression:"isProgressBar"}],staticClass:"progress-bar",attrs:{span:18}},[a("el-col",{staticClass:"star-time",attrs:{span:1,offset:5}},[a("span",[t._v(t._s(t.playTime))])]),t._v(" "),a("el-col",{attrs:{span:13}},[a("el-slider",{attrs:{step:1},on:{change:function(e){t.changeProgress()}},model:{value:t.playProgress,callback:function(e){t.playProgress=e},expression:"playProgress"}})],1),t._v(" "),a("el-col",{staticClass:"sum-time",attrs:{span:1}},[a("span",[t._v(t._s(t.allTime))])]),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:t.play}},[t._v(t._s(t.playState))]),t._v(" "),a("el-button",{attrs:{size:"large"},on:{click:t.doublePlay}},[t._v(t._s(t.speed))])],1),t._v(" "),a("el-col",{staticClass:"play-cancle",attrs:{span:1}},[a("span",{on:{click:t.progressBarShow}},[t._v("×")])])],1)],2)],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},VCcd:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;return(t._self._c||e)("form",{on:{submit:t.submit}},[t._t("default")],2)},r=[],n={render:o,staticRenderFns:r};e.a=n},"VG/u":function(t,e){},VYHB:function(t,e,a){"use strict";function o(t){a("VG/u")}var r=a("/Hqz"),n=a("MrGL"),i=a("VU/8"),l=o,s=i(r.a,n.a,!1,l,null,null);e.a=s.exports},YaEn:function(t,e,a){"use strict";var o=a("7+uW"),r=a("/ocq"),n=a("VYHB"),i=a("RnuQ"),l=a("HG1V"),s=a("NLBK"),d=a("kq+U"),u=a("FqZ1"),c=a("qxpn"),m=a("uB1Z");o.default.use(r.a),e.a=new r.a({routes:[{path:"/",name:"Dashboard",component:i.a},{path:"/stationManage",name:"stationManage",component:l.a},{path:"/labelManage",name:"labelManage",component:s.a},{path:"/zoneManage",name:"zoneManage",component:c.a},{path:"/login",name:"signIn",component:n.a},{path:"/test",name:"test",component:d.a},{path:"/planeManage",name:"plane",component:u.a},{path:"/configManage",name:"config",component:m.a}]})},a8lq:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stationManage"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"节点编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{display:"inline-block",width:"10px",height:"10px"},style:{background:e.row.color}}),t._v(" "),a("span",[t._v(t._s(e.row.nodeID))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),"station"==t.url?a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(2==e.row.nodeType?"UWB":"GNSS")+"\n                ")]}}])}):t._e(),t._v(" "),"label"==t.url?a("el-table-column",{attrs:{prop:"status",label:"电量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:e.row.status<30?"danger":"success"}},[t._v("\n                    "+t._s(e.row.status)+"\n                ")])]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"coordinate",label:"坐标"}}),t._v(" "),"label"==t.url?a("el-table-column",{attrs:{prop:"anchors",label:"相关基站"}}):t._e(),t._v(" "),"label"==t.url?a("el-table-column",{attrs:{prop:"satNum",label:"卫星数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:e.row.satNum<9?"danger":"success"}},[t._v("\n                    "+t._s(e.row.satNum)+"\n                ")])]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}})],1)],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},hYcz:function(t,e,a){"use strict";var o=a("+ohG"),r=a("a8lq"),n=a("VU/8"),i=n(o.a,r.a,!1,null,null,null);e.a=i.exports},"jT0/":function(t,e,a){"use strict";var o=a("//Fk"),r=a.n(o),n=a("woOf"),i=a.n(n),l=a("S9gf");e.a={data:function(){return{zoneData:[],dialogEditZone:!1,dialogAddZone:!1,form:{start_point:[]},addForm:{start_point:[]},formLabelWidth:"120px",rules:{region_name:[{required:!0,message:"请输入名称",trigger:"blur"}],width:[{required:!0,type:"number",message:"请输入长度",trigger:"blur,change"}],height:[{required:!0,type:"number",message:"请输入宽度",trigger:"blur,change"}],background_image:[{required:!0,message:"请输入图片路径",trigger:"blur"}],start_point:[{required:!0,validator:function(t,e,a){return e.length<1?a(new Error("坐标不能为空")):isNaN(e[0])?a(new Error("必须为数字值")):void 0!==e[1]&&isNaN(e[1])?a(new Error("必须为数字值")):void a()},trigger:"blur"}],maxEnlarge:[{required:!0,type:"number",message:"请输入最大放大倍数",trigger:"blur,change"}],maxNarrow:[{required:!0,type:"number",message:"请输入最大缩小倍数",trigger:"blur,change"}]}}},mounted:function(){this.getZoneInfo()},methods:{openEdit:function(t){this.form=i()({},t),this.dialogEditZone=!0},getZoneInfo:function(){var t=this;return l.a.getAreas().then(function(e){return t.zoneData=t.showCoordinate(e),r.a.resolve()})},deleteArea:function(t,e){var a=this;return r.a.resolve().then(function(){return a.$confirm("确定要删除此区域？","警告",{confirmButtonText:"确定",cancelButtonText:"取消"})}).then(function(){return l.a.deleteArea(e[t].id).then(function(){return a.getZoneInfo()}).then(function(){a.$message({type:"success",message:"删除成功"})},function(){a.$message({type:"error",message:"删除失败"})})})},updateArea:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({type:"error",message:"表格验证失败"}),!1;l.a.updateArea(e.form.id,e.form).then(function(){e.$message({type:"success",message:"更新成功"}),e.dialogEditZone=!1,e.getZoneInfo()},function(t){e.$message({type:"error",message:"更新失败"})}).then(function(){})})},addArea:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({type:"error",message:"表格验证失败"}),!1;l.a.addArea(e.addForm).then(function(){e.dialogAddZone=!1,e.getZoneInfo()},function(){e.$message({type:"error",message:"添加失败"})})})},cancelAdd:function(t){this.dialogAddZone=!1,this.$refs[t].resetFields()},cancelInfo:function(t){this.dialogEditZone=!1,this.$refs[t].resetFields()},showCoordinate:function(t){for(var e=0;e<t.length;e++)t[e].coordinate=t[e].start_point[0]+","+t[e].start_point[1];return t}}}},"kq+U":function(t,e,a){"use strict";var o=a("IY2h"),r=a("71je"),n=a("VU/8"),i=n(o.a,r.a,!1,null,null,null);e.a=i.exports},kwYz:function(t,e,a){"use strict";var o=a("mvHQ"),r=a.n(o),n=a("fZjL"),i=a.n(n),l=a("S9gf");e.a={data:function(){return{uwbData:[],rtkData:[],dialogEditUWB:!1,dialogEditRTK:!1,uwbForm:{limit:{},threshold:{}},rtkForm:{},formLabelWidth:"120px",rules:{limit:[{required:!0,validator:function(t,e,a){return i()(e).length<1?a(new Error("不能为空")):isNaN(e.hightLimit)?a(new Error("必须为数字值")):void 0==e.vLimit?a(new Error("不能为空")):void a()},trigger:"blur"}],threshold:[{required:!0,validator:function(t,e,a){return i()(e).length<1?a(new Error("不能为空")):isNaN(e.C21)?a(new Error("必须为数字值")):void 0!==e.C22&&isNaN(e.C22)?a(new Error("必须为数字值")):void a()},trigger:"blur"}],IterNum:[{required:!0,type:"number",message:"请输入",trigger:"blur,change"}],positionMargin:[{required:!0,type:"number",message:"请输入",trigger:"blur,change"}],positionNumToPick:[{required:!0,type:"number",message:"请输入",trigger:"blur,change"}],portToUWBLib:[{required:!0,type:"number",message:"请输入",trigger:"blur,change"}],logLevel:[{required:!0,message:"请输入",trigger:"blur,change"}],recorder:[{required:!0,message:"请输入",trigger:"blur,change"}],InputStream_type:[{required:!0,type:"number",message:"请输入",trigger:"blur,change"}],InputStream_file:[{required:!0,message:"请输入",trigger:"blur,change"}],Log_InputData:[{required:!0,type:"number",message:"请输入",trigger:"blur,change"}],Log_OutputData:[{required:!0,type:"number",message:"请输入",trigger:"blur,change"}],Log_RoverSol:[{required:!0,type:"number",message:"请输入",trigger:"blur,change"}]}}},created:function(){this.getUWBInfo(),this.getRTKInfo()},methods:{getUWBInfo:function(){var t=this;l.a.getUWB().then(function(e){var a=[];a.push(JSON.parse(r()(e))),t.uwbData=a})},getRTKInfo:function(){var t=this;l.a.getRTK().then(function(e){var a=[];a.push(JSON.parse(r()(e))),t.rtkData=a})},updateUWB:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({type:"error",message:"表格验证失败"}),!1;l.a.updateUWB(e.uwbForm).then(function(){e.$message({type:"success",message:"更新成功"}),e.dialogEditUWB=!1,e.getUWBInfo()},function(t){e.$message({type:"error",message:"更新失败"})}).then(function(){})})},updateRTK:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({type:"error",message:"表格验证失败"}),!1;l.a.updateRTK(e.rtkForm).then(function(){e.$message({type:"success",message:"更新成功"}),e.dialogEditRTK=!1,e.getRTKInfo()},function(t){e.$message({type:"error",message:"更新失败"})}).then(function(){})})},cancelInfo:function(t){this.dialogEditUWB=!1,this.dialogEditRTK=!1,this.$refs[t].resetFields()}}}},obim:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},ogKe:function(t,e,a){"use strict";var o=a("64oi"),r=a("VCcd"),n=a("VU/8"),i=n(o.a,r.a,!1,null,null,null);e.a=i.exports},qAKN:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("el-col",{staticClass:"sidebarCol",attrs:{span:4}},[a("el-menu",{staticClass:"el-menu-vertical-demo sidebarMenu",attrs:{"default-active":this.$route.path,"background-color":"#545c64","text-color":"#fff",router:!0}},[a("h3",{staticClass:"sidebarTitle"},[t._v("大船定位")]),t._v(" "),a("el-menu-item",{attrs:{index:"/"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("监控面板")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/stationManage"}},[a("i",{staticClass:"el-icon-location"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("基站管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/labelManage"}},[a("i",{staticClass:"el-icon-location-outline"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("标签管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/zoneManage"}},[a("i",{staticClass:"el-icon-view"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("区域管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/planeManage"}},[a("i",{staticClass:"el-icon-view"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("设备管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/configManage"}},[a("i",{staticClass:"el-icon-setting"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("配置管理")])])],1)],1)],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},qxpn:function(t,e,a){"use strict";var o=a("jT0/"),r=a("wI4T"),n=a("VU/8"),i=n(o.a,r.a,!1,null,null,null);e.a=i.exports},tvR6:function(t,e){},uB1Z:function(t,e,a){"use strict";var o=a("kwYz"),r=a("Q+t5"),n=a("VU/8"),i=n(o.a,r.a,!1,null,null,null);e.a=i.exports},wI4T:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sidebar"),t._v(" "),a("el-row",[a("el-col",{staticClass:"stationManageTitle",attrs:{span:14,offset:5}},[t._v("\n            区域管理\n            "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(e){t.dialogAddZone=!0}}},[t._v("添加\n            ")])],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"stationManage",staticStyle:{"margin-bottom":"20px"},attrs:{span:18,offset:5}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.zoneData}},[a("el-table-column",{attrs:{prop:"region_name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"width",label:"长"}}),t._v(" "),a("el-table-column",{attrs:{prop:"height",label:"宽"}}),t._v(" "),a("el-table-column",{attrs:{prop:"background_image",label:"图片URL"}}),t._v(" "),a("el-table-column",{attrs:{prop:"coordinate",label:"坐标"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maxEnlarge",label:"最大放大倍数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maxNarrow",label:"最大缩小倍数"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.openEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"stationManageRe",attrs:{size:"small",type:"text"},nativeOn:{click:function(a){a.preventDefault(),t.deleteArea(e.$index,t.zoneData)}}},[t._v("删除\n                        ")])]}}])})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.dialogEditZone,top:"5%",modal:!0,"show-close":!1},on:{"update:visible":function(e){t.dialogEditZone=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,labelPosition:"left"}},[a("el-form-item",{attrs:{label:"ID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{disabled:!0},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"region_name","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"名称"},model:{value:t.form.region_name,callback:function(e){t.$set(t.form,"region_name",e)},expression:"form.region_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"长",prop:"width","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"长",value:"form.width"},model:{value:t.form.width,callback:function(e){t.$set(t.form,"width",t._n(e))},expression:"form.width"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"宽",prop:"height","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"宽",value:"form.height"},model:{value:t.form.height,callback:function(e){t.$set(t.form,"height",t._n(e))},expression:"form.height"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"background_image","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"url",value:"form.background_image"},model:{value:t.form.background_image,callback:function(e){t.$set(t.form,"background_image",e)},expression:"form.background_image"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"坐标",prop:"start_point","label-width":t.formLabelWidth}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"X",value:"form.start_point[0]"},model:{value:t.form.start_point[0],callback:function(e){t.$set(t.form.start_point,0,t._n(e))},expression:"form.start_point[0]"}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"Y",value:"form.start_point[1]"},model:{value:t.form.start_point[1],callback:function(e){t.$set(t.form.start_point,1,t._n(e))},expression:"form.start_point[1]"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"最大放大倍数",prop:"maxEnlarge","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"最大放大倍数",value:"form.maxEnlarge"},model:{value:t.form.maxEnlarge,callback:function(e){t.$set(t.form,"maxEnlarge",t._n(e))},expression:"form.maxEnlarge"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"最大缩小倍数",prop:"maxNarrow","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"最大缩小倍数",value:"form.maxNarrow"},model:{value:t.form.maxNarrow,callback:function(e){t.$set(t.form,"maxNarrow",t._n(e))},expression:"form.maxNarrow"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelInfo("form")}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateArea("form")}}},[t._v("保存")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加区域",visible:t.dialogAddZone,top:"5%",modal:!0,"show-close":!1},on:{"update:visible":function(e){t.dialogAddZone=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.rules,labelPosition:"left"}},[a("el-form-item",{attrs:{label:"名称",prop:"region_name","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"名称"},model:{value:t.addForm.region_name,callback:function(e){t.$set(t.addForm,"region_name",e)},expression:"addForm.region_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"长",prop:"width","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"长"},model:{value:t.addForm.width,callback:function(e){t.$set(t.addForm,"width",t._n(e))},expression:"addForm.width"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"宽",prop:"height","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"宽"},model:{value:t.addForm.height,callback:function(e){t.$set(t.addForm,"height",t._n(e))},expression:"addForm.height"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"background_image","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autoComplete:"off",placeholder:"图片"},model:{value:t.addForm.background_image,callback:function(e){t.$set(t.addForm,"background_image",e)},expression:"addForm.background_image"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"坐标",prop:"start_point","label-width":t.formLabelWidth}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"number",prop:"start_point",autoComplete:"off",placeholder:"X"},model:{value:t.addForm.start_point[0],callback:function(e){t.$set(t.addForm.start_point,0,t._n(e))},expression:"addForm.start_point[0]"}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"number",prop:"start_point",autoComplete:"off",placeholder:"Y"},model:{value:t.addForm.start_point[1],callback:function(e){t.$set(t.addForm.start_point,1,t._n(e))},expression:"addForm.start_point[1]"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"最大放大倍数",prop:"maxEnlarge","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"最大放大倍数"},model:{value:t.addForm.maxEnlarge,callback:function(e){t.$set(t.addForm,"maxEnlarge",t._n(e))},expression:"addForm.maxEnlarge"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"最大缩小倍数",prop:"maxNarrow","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"number",autoComplete:"off",placeholder:"最大缩小倍数"},model:{value:t.addForm.maxNarrow,callback:function(e){t.$set(t.addForm,"maxNarrow",t._n(e))},expression:"addForm.maxNarrow"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelAdd("addForm")}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addArea("addForm")}}},[t._v("创建")])],1)],1)],1)},r=[],n={render:o,staticRenderFns:r};e.a=n},xJD8:function(t,e,a){"use strict";var o=a("S9gf");e.a={beforeCreate:function(){var t=this;return o.a.isLogin().then(function(e){0==e.bool&&t.$router.push("/login")})}}},ymcs:function(t,e,a){"use strict";var o=a("7+uW"),r=new o.default;window.client.subscribe("/node",function(t){r.$emit("message",t),"rtkres_basepos"===t.name&&(t.data.x=t.data.lat,t.data.y=t.data.lon,r.$emit("rtkres_basepos",t.data)),"rtkres_baseobs"===t.name&&r.$emit("rtkres_baseobs",t.data),"status"===t.name&&r.$emit("status",t.data),"rtkres_roverpos"===t.name&&(t.data.x=t.data.x/1e3,t.data.y=t.data.y/1e3,t.data.z=t.data.z/1e3,r.$emit("rtkres_roverpos",t.data)),"rtkres_roverobs"===t.name&&r.$emit("rtkres_roverobs",t.data),"rtkres_attitude"===t.name&&r.$emit("rtkres_attitude",t.data),"uwbbase_stat"===t.name&&r.$emit("uwbbase_stat",t.data),"user_uwb"===t.name&&(t.data.x=t.data.x/500,t.data.y=t.data.y/500,t.data.z="",r.$emit("user_uwb",t.data)),"user_stat"===t.name&&r.$emit("user_stat",t.data)}),e.a=r}},["NHnr"]);
//# sourceMappingURL=app.67745841d1a63205db04.js.map